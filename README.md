# Telegram Bot –¥–ª—è –†–∞—Å—Å—ã–ª–∫–∏

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Å—ã–ª–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º aiogram –∏ Telethon.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ SMS/–ø–∞—Ä–æ–ª—å
- ‚úÖ **3 —Ç–∏–ø–∞ —Ä–∞—Å—Å—ã–ª–∫–∏**:
  - –° —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º
  - –° —Å–ª—É—á–∞–π–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (–æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
  - –° –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏ —Ç–µ–∫—Å—Ç–æ–º
- ‚úÖ **–ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º** - –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ —Ä–∞—Å—Å—ã–ª–∫–∏ –≤ 2 —Ä–∞–∑–∞ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
- ‚úÖ **–†–∞—Å—Å—ã–ª–∫–∞ –≤–æ –≤—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã** –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Å—ã–ª–æ–∫** - –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≥—Ä—É–ø–ø
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –Ω–∞ aiogram 3.x

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
tgMaiils/
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ main.py                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ database.py        # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py            # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ accounts.py        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ groups.py          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ mailing.py         # –†–∞—Å—Å—ã–ª–∫–∞
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ auth_service.py    # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ mailing_service.py # –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—Å—ã–ª–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ night_mode.py      # –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ keyboards.py       # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    ‚îî‚îÄ‚îÄ helpers.py         # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone <repository-url>
cd tgMaiils
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
pip install -r requirements.txt
```

3. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env:**
```env
BOT_TOKEN=your_bot_token_here
ADMIN_IDS=123456789,987654321
DATABASE_URL=sqlite:///mailing_bot.db
```

4. **–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞:**
   - –ù–∞–ø–∏—à–∏—Ç–µ @BotFather –≤ Telegram
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/newbot`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ .env —Ñ–∞–π–ª

5. **–î–æ–±–∞–≤—å—Ç–µ –≤–∞—à Telegram ID –≤ ADMIN_IDS:**
   - –ù–∞–ø–∏—à–∏—Ç–µ @userinfobot –≤ Telegram
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à ID –≤ .env —Ñ–∞–π–ª

6. **‚ö†Ô∏è –í–ê–ñ–ù–û: API Credentials –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞:**
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–±–∞–≤–ª—è–µ–º–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω—É–∂–Ω—ã —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ API credentials
   - –ü–æ–ª—É—á–∏—Ç–µ –∏—Ö –Ω–∞ https://my.telegram.org
   - –ë–æ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç API ID –∏ API Hash –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞

## üöÄ –ó–∞–ø—É—Å–∫

```bash
python main.py
```

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- **‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ —á–µ—Ä–µ–∑ SMS
- **üë• –î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ)
- **üë§ –ú–æ–∏ –∞–∫–∫–∞—É–Ω—Ç—ã** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏
- **üìß –†–∞—Å—Å—ã–ª–∫–∞ –≤–æ –≤—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã** - –º–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞
- **‚èπ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É** - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Ä–∞—Å—Å—ã–ª–æ–∫
- **üìã –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Å—ã–ª–∫–∏** - –ø—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏
- **üåô –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

### –¢–∏–ø—ã —Ä–∞—Å—Å—ã–ª–∫–∏

#### 1. –° —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º
- –û–¥–∏–Ω–∞–∫–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü—Ä–∏–º–µ—Ä: –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç

#### 2. –° —Å–ª—É—á–∞–π–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (–æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
- –°–ª—É—á–∞–π–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
- –ü—Ä–∏–º–µ—Ä: 10-15 –º–∏–Ω—É—Ç (–º–æ–∂–µ—Ç –±—ã—Ç—å 11, 14, 10 –º–∏–Ω—É—Ç)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ 90% —Å–ª—É—á–∞–µ–≤

#### 3. –° –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- –¢–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å —Ç–µ–∫—Å—Ç–æ–º
- –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç

### –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º
- –ó–∞–º–µ–¥–ª—è–µ—Ç —Ä–∞—Å—Å—ã–ª–∫—É –≤ 2 —Ä–∞–∑–∞ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
- –ü—Ä–∏–º–µ—Ä: —Å 21:00 –¥–æ 5:00 –ø–æ –ö–∏–µ–≤—É
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —á–∞—Å—ã –∏ –º–Ω–æ–∂–∏—Ç–µ–ª—å

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config.py`:

```python
# –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
DEFAULT_MIN_INTERVAL = 5  # –º–∏–Ω—É—Ç
DEFAULT_MAX_INTERVAL = 15  # –º–∏–Ω—É—Ç

# –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º
DEFAULT_NIGHT_START = 21  # —á–∞—Å –Ω–∞—á–∞–ª–∞
DEFAULT_NIGHT_END = 5     # —á–∞—Å –æ–∫–æ–Ω—á–∞–Ω–∏—è
NIGHT_MODE_MULTIPLIER = 2  # –º–Ω–æ–∂–∏—Ç–µ–ª—å

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
MAX_PHOTO_SIZE = 10 * 1024 * 1024  # 10MB
MAX_HISTORY_ITEMS = 10  # –∑–∞–ø–∏—Å–µ–π –≤ –∏—Å—Ç–æ—Ä–∏–∏
```

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è:
- **–ê–∫–∫–∞—É–Ω—Ç—ã** - –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã
- **–ì—Ä—É–ø–ø—ã** - –≥—Ä—É–ø–ø—ã –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏
- **–†–∞—Å—Å—ã–ª–∫–∏** - –∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏
- **–ò—Å—Ç–æ—Ä–∏—è** - –∏—Å—Ç–æ—Ä–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **–ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (ADMIN_IDS)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
- –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

## üêõ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `bot.log` –∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- –î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –≥—Ä—É–ø–ø–∞–º–∏ (–Ω–µ —Å –∫–∞–Ω–∞–ª–∞–º–∏ –∏ –ª–∏—á–Ω—ã–º–∏ —á–∞—Ç–∞–º–∏)
- –¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ –≥—Ä—É–ø–ø–∞—Ö –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `bot.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ `.env`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –≥—Ä—É–ø–ø–∞—Ö
4. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è 